<section class="content">
  <div class="content-block">
    <div class="block-header mt-5">
    </div>
    <!-- Your content goes here  -->
    <div class="row clearfix">
      <div class="col-lg-4 col-md-12">
        <div class="card">
          <div class="pt-5">
            <div class="contact-grid pt-5">
              <img [src]="head_dep?.image ? head_dep.image : 'assets/images/user/profile.jpg'" class="user-img" alt="">
              <div class="profile-header">
                <div class="user-name">{{head_dep?.firstName}} {{head_dep?.lastName}}</div>
                <div class="name-center" *ngIf="role==='head_super_department'">Head of {{superDep[0]?.name}} super department</div>
                <div class="name-center" *ngIf="role==='head_sub_department'">Head of {{subDep[0]?.name}} sub department</div>
              </div>


            </div>
          </div>
        </div>

        <div class="plain-card mt-4">
          <div class="card-inner">
            <h6 class="tx-primary m-b-15">Fees Collection Report</h6>
            <div class="row mb-2">
              <div class="col-4">
                <label class="font-14">Today</label>
                <h5>$107<i class="material-icons col-orange">trending_down</i></h5>
              </div>
              <div class="col-4">
                <label class="font-14">This Week</label>
                <h5>$268<i class="material-icons col-green">trending_up</i></h5>
              </div>
              <div class="col-4">
                <label class="font-14">This Month</label>
                <h5>$847<i class="material-icons col-orange">trending_down</i></h5>
              </div>
            </div>
            <div class="progress shadow-style mb-2 mt-3">
              <div class="progress-bar l-bg-red width-per-50" role="progressbar" aria-valuenow="50" aria-valuemin="0"
                   aria-valuemax="100">50%
              </div>
            </div>
          </div>
        </div>

      </div>
      <div class="col-lg-8 col-md-12">
        <div class="card">
          <mat-tab-group>
            <mat-tab>
              <ng-template mat-tab-label>
                <mat-icon class="example-tab-icon msr-2">face</mat-icon>
                About Me
              </ng-template>
              <div class="col-lg-12 col-md-12 col-sm-12 p-5">
                <div class="course-detelies-wrapper">
                  <div class="course-detiles-tittle mb-30">
                    <h3>{{head_dep?.firstName}} {{head_dep?.lastName}}</h3>
                    <div class="name-center" *ngIf="role==='head_super_department'">Head of {{superDep[0]?.name}} super department</div>
                    <div class="name-center" *ngIf="role==='head_sub_department'">Head of {{subDep[0]?.name}} sub department</div>
                  </div>
                  <div class="course-detiles-meta" *ngFor="let superDep of superDep">

                    <div class="" *ngIf="role==='head_super_department'">
                      <h5>Department</h5>
                      <span>{{superDep.name}}</span>
                    </div>
                    <div class="" *ngIf="role==='head_super_department'">
                      <h5>N+1 manager</h5>
                      <span>{{SuperAdmin}}</span>
                    </div>
                    <div class="">
                      <h5>Email</h5>
                      <span>{{head_dep?.email}}</span>
                    </div>
                    <div class="">
                      <h5>Phone</h5>
                      <span> {{head_dep?.mobile_phone}}</span>
                    </div>
                    <div class="" *ngIf="role==='head_super_department'">
                      <h5>sub_departments</h5>
                      <span>{{superDepSubDepartments?.length}}</span>
                    </div>
                    <div class="" *ngIf="role==='head_super_department'">
                      <h5>Teachers</h5>
                      <span>{{teachers_super_dep}}</span>
                    </div>
                  </div>
                  <div class="course-detiles-meta" *ngFor="let subDep of subDep">

                    <div class="" *ngIf="role==='head_super_department'">
                      <h5>Department</h5>
                      <span>{{subDep.name}}</span>
                    </div>
                    <div class="">
                      <h5>Email</h5>
                      <span>{{head_dep?.email}}</span>
                    </div>
                    <div class="">
                      <h5>Phone</h5>
                      <span> {{head_dep?.mobile_phone}}</span>
                    </div>
                    <div class="" >
                      <h5>N+1 Manager</h5>
                      <span>{{manager}}</span>
                    </div>
                    <div class="" >
                      <h5>N+2 Manager</h5>
                      <span>{{SuperAdmin}}</span>
                    </div>
                    <div class="" >
                      <h5>Teachers</h5>
                      <span>{{subDep.subDepNbTeachers}}</span>
                    </div>
                  </div>
                  <div class="header mt-4" *ngIf="role==='head_super_department'">
                    <h2>My sub departments List</h2>

                  </div>
                  <div class="tableBody mt-4" *ngIf="role==='head_super_department'">
                    <div class="table-responsive">
                      <table class="table table-hover">
                        <thead>
                        <tr>
                          <th>Sub department Name</th>
                          <th>head of sub department</th>
                          <th>teachers</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let subDep of superDepSubDepartments">
                          <td>
                            <div class="media-title"><span> {{subDep.name}}</span></div>
                          </td>
                          <td>
                            <div class="media-title"><span> {{subDep.head_of_sub_department.firstName}} {{subDep.head_of_sub_department.lastName}}</span></div>
                          </td>
                          <td>
                            <span class="font-bold">{{subDep.subDepNbTeachers}}</span>
                          </td>
                        </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <div class="header mt-4" *ngIf="role==='head_sub_department'">
                  <h2>My courses List</h2>
                </div>
                <div class="tableBody" *ngIf="role==='head_sub_department'">
                  <div class="table-responsive">
                    <table class="table table-hover">
                      <thead>
                      <tr>
                        <th></th>
                        <th>Course Name</th>
                        <th>Students Enrolled in</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let course of teacherApprovedCourses">
                        <td class="table-img">
                          <img src="{{course.image}}" alt="">
                        </td>
                        <td>
                          <div class="media-title"><span> {{course.title}}
                    </span></div>
                        </td>
                        <td>
                          <span class="font-bold">{{course.total_enrolled}}</span>
                        </td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

              </div>
            </mat-tab>
            <mat-tab label="Profile Picture">
              <ng-template mat-tab-label>
                <mat-icon class="example-tab-icon msr-2">camera</mat-icon>
                upload pictures
              </ng-template>
              <form [formGroup]="headDepForm">
                <div class="mb-16 mt-16 p-5">
                  <label>Upload profile photo</label>
                  <app-file-upload fileType="upload image"
                                   [loading]="loading"
                                   [onClickFunction]="updateProfilePicture.bind(this, head_dep?.id)"
                                   (change)="onImageSelected($event)" formControlName="image"></app-file-upload>
                </div>
              </form>

            </mat-tab>

            <mat-tab>
              <ng-template mat-tab-label>
                <mat-icon class="example-tab-icon msr-2">settings</mat-icon>
                Settings
              </ng-template>
              <div class="header">
                <h2>
                  <strong>Account</strong> Settings</h2>
              </div>
              <div class="body">
                <form [formGroup]="headDepForm">
                    <div class="col-lg-12 col-md-12">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>First Name</mat-label>
                        <input matInput formControlName="firstName">
                      </mat-form-field>
                    </div>
                    <div class="col-lg-12 col-md-12">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Last Name</mat-label>
                        <input matInput formControlName="lastName">
                      </mat-form-field>
                    </div>

                    <div class="col-lg-12 col-md-12">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Mobile Phone</mat-label>
                        <span matPrefix>
            <mat-icon class="msr-2">phone</mat-icon>
          </span>
                        <input matInput formControlName="mobile_phone"/>
                      </mat-form-field>
                    </div>
                  <div class="col-md-12">
                    <button mat-raised-button color="primary" (click)="updateHead(head_dep.id)"
                            [disabled]="headDepForm.invalid">Save Changes
                    </button>
                  </div>
                </form>
              </div>

            </mat-tab>
          </mat-tab-group>
        </div>
      </div>
    </div>
  </div>
</section>
